{% extends 'base.html' %}
{% block title %}Iniciar Sesión{% endblock %}
{% block content %}

    <style>
        body { font-family: sans-serif; }
        .container { width: 300px; margin: 50px auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border-radius: 50px; /* Bordes redondeados */
            background-color: #f8f8f8; /* Fondo gris muy claro */
            border: 1px solid #ccc; /* Añade un borde sutil para contraste */
        }

        input[type="text"], input[type="email"], input[type="password"], input[type="file"] { width: 100%; padding: 8px; box-sizing: border-box; }
        .error { color: red; }
        .success { color: green; }
        .show-password { cursor: pointer; }
    </style>

    <div class="container">
        <h2>Registro</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <form method="POST" enctype="multipart/form-data">
            {{ form.csrf_token }}
            <div class="form-group">
                {{ form.username.label }}
                {{ form.username }}
                {% if form.username.errors %}
                    <ul class="errors">
                        {% for error in form.username.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.email.label }}
                {{ form.email }}
                {% if form.email.errors %}
                    <ul class="errors">
                        {% for error in form.email.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.cedula.label }}
                {{ form.cedula }}
                {% if form.cedula.errors %}
                    <ul class="errors">
                        {% for error in form.cedula.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.password.label }}
                {{ form.password }}
                <span class="show-password" onclick="togglePassword('password')">Mostrar</span>
                {% if form.password.errors %}
                    <ul class="errors">
                        {% for error in form.password.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.confirm_password.label }}
                {{ form.confirm_password }}
                <span class="show-password" onclick="togglePassword('confirm_password')">Mostrar</span>
                {% if form.confirm_password.errors %}
                    <ul class="errors">
                        {% for error in form.confirm_password.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="image">Imagen de Usuario:</label>
                <input type="file" name="image" id="image">
            </div>
            {{ form.submit }}
        </form>
        <p>¿Ya tienes una cuenta? <a href="{{ url_for('login') }}">Inicia sesión aquí</a></p>
    </div>

    <script>
        function togglePassword(inputId) {
            var passwordInput = document.querySelector('input[name="' + inputId + '"]');
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
        }
    </script>

   
{% endblock %}