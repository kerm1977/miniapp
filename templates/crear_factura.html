{% extends 'base.html' %}

{% block title %}Crear Factura{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="card rounded-lg p-4 border-0">
        <div class="card-body">
            <h1 class="text-4xl fw-bold text-center mb-8 text-dark">Crear Nueva Factura</h1>

            <form method="POST" class="p-8 bg-white rounded-lg">
                {{ form.csrf_token }}

                <div class="card mb-4 border-0">
                    <div class="card-body bg-light rounded">
                        <h2 class="card-title text-primary mb-4 border-bottom pb-2">Información de la Factura</h2>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="cliente_id" class="form-label">Caminante</label>
                                {{ form.cliente_id(class="form-select") }}
                                {% if form.cliente_id.errors %}
                                    {% for error in form.cliente_id.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="fecha_emision" class="form-label">Fecha de Emisión</label>
                                {{ form.fecha_emision(class="form-control", type="date") }}
                                {% if form.fecha_emision.errors %}
                                    {% for error in form.fecha_emision.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="monto_total" class="form-label">Monto Total (₡)</label>
                                {{ form.monto_total(class="form-control", placeholder="Ej: 50000.00") }}
                                {% if form.monto_total.errors %}
                                    {% for error in form.monto_total.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="interes" class="form-label">Interés</label>
                                {{ form.interes(class="form-select") }}
                                {% if form.interes.errors %}
                                    {% for error in form.interes.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="realizado_por" class="form-label">Realizado por</label>
                                {{ form.realizado_por(class="form-select") }}
                                {% if form.realizado_por.errors %}
                                    {% for error in form.realizado_por.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="sinpe" class="form-label">SINPE</label>
                                {{ form.sinpe(class="form-select") }}
                                {% if form.sinpe.errors %}
                                    {% for error in form.sinpe.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="tipo_actividad" class="form-label">Tipo de actividad</label>
                                {{ form.tipo_actividad(class="form-select") }}
                                {% if form.tipo_actividad.errors %}
                                    {% for error in form.tipo_actividad.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="nombre_actividad_etapa" class="form-label">Nombre de la actividad o Etapa</label>
                                {{ form.nombre_actividad_etapa(class="form-control", placeholder="Nombre de la actividad o etapa") }}
                                {% if form.nombre_actividad_etapa.errors %}
                                    {% for error in form.nombre_actividad_etapa.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="costo_actividad" class="form-label">Costo de la actividad (₡)</label>
                                {{ form.costo_actividad(class="form-control", placeholder="Ej: 25000.00") }}
                                {% if form.costo_actividad.errors %}
                                    {% for error in form.costo_actividad.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-12">
                                <label for="descripcion" class="form-label">Descripción General</label>
                                {{ form.descripcion(class="form-control", rows="3", placeholder="Descripción detallada de la factura") }}
                                {% if form.descripcion.errors %}
                                    {% for error in form.descripcion.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <div class="col-12">
                                <label for="otras_descripcion" class="form-label">Otras descripción</label>
                                {{ form.otras_descripcion(class="form-control", rows="3", placeholder="Cualquier otra descripción adicional") }}
                                {% if form.otras_descripcion.errors %}
                                    {% for error in form.otras_descripcion.errors %}
                                    <div class="text-danger small mt-1">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-center mt-4">
                    <button type="submit" class="btn btn-primary btn-lg rounded-pill me-2">Crear Factura</button>
                    <a href="{{ url_for('ver_facturas') }}" class="btn btn-secondary btn-lg rounded-pill">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
