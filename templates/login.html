{% extends 'base.html' %}
{% block title %}Iniciar Sesión{% endblock %}
{% block content %}
    <style>
        body { font-family: sans-serif; }
        .container { width: 300px; margin: 50px auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border-radius: 50px; /* Bordes redondeados */
            background-color: #f8f8f8; /* Fondo gris muy claro */
            border: 1px solid #ccc; /* Añade un borde sutil para contraste */
        }
        .error { color: red; }
        .success { color: green; }
        .show-password { cursor: pointer; }
    </style>
    <div class="container">
        <h2>Iniciar Sesión</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <form method="POST">
            {{ form.csrf_token }}
            <div class="form-group">
                {{ form.username.label }}
                {{ form.username }}
                {% if form.username.errors %}
                    <ul class="errors">
                        {% for error in form.username.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.password.label }}
                {{ form.password }}
                <span class="show-password" onclick="togglePassword()">Mostrar</span>
                {% if form.password.errors %}
                    <ul class="errors">
                        {% for error in form.password.errors %}
                            <li class="error">{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            {{ form.submit }}
        </form>
        <p>¿No tienes cuenta? <a href="{{ url_for('registro') }}">Regístrate aquí</a></p>
    </div>

    <script>
        function togglePassword() {
            var passwordInput = document.querySelector('input[name="password"]');
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
        }
    </script>
{% endblock %}